webpackJsonp([1],{"1G2/":function(t,e){},"7zck":function(t,e){},M3tW:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a={name:"App",methods:{reload:function(){window.location.reload()}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"app"}},[e("v-toolbar",{attrs:{dark:"",color:"primary"}},[e("v-toolbar-side-icon"),this._v(" "),e("v-toolbar-title",{staticClass:"white--text"},[this._v("Selfish routing")]),this._v(" "),e("v-spacer"),this._v(" "),e("v-btn",{attrs:{icon:""},on:{click:this.reload}},[e("v-icon",[this._v("refresh")])],1)],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")(a,i,!1,function(t){n("1G2/")},null,null).exports,s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"data-viz"}})},staticRenderFns:[]};var l=n("VU/8")({},s,!1,function(t){n("SMe9")},null,null).exports,c=n("vwbq"),u={name:"Form",data:function(){return{isActive:!1}},methods:{changeSelectingMode:function(t){c.f("#data-viz").selectAll("line").attr("selecting-mode",!0),this.isActive=!this.isActive},resetSelectingMode:function(){var t=c.f("#data-viz");t.selectAll("line.link").attr("selecting-mode",!1),t.selectAll("line.link").attr("selected",!1),t.selectAll("line.link").attr("stroke","#aaa"),this.isActive=!this.isActive},submitRoute:function(){var t=this,e=c.f("#data-viz"),n=[];e.selectAll('line[selected = "true"]').each(function(r,a){t.$store.commit("increment",r.id),e.select("#link"+r.id).attr("flow",t.$store.getters.getLinkById(r.id).flow),n.push(r.id),console.log(t.$store.getters.getNodeById(r.source))});var r={id:this.$store.state.items.length,route:n};this.$store.commit("pushItem",r),e.selectAll("line").attr("selecting-mode",!1),e.selectAll("line").attr("selected",!1),e.selectAll("line").attr("stroke","#aaa"),this.isActive=!this.isActive;var a=10,i=30,o=30,s=40,l=500-s-i,u=500-a-o,d=c.f("div.tooltip");c.f("#data-viz-res").remove();var f=c.f("#data-viz").append("svg").attr("id","data-viz-res").attr("width",l+s+i).attr("height",u+a+o).append("g").attr("transform","translate("+s+","+a+")"),p=f.selectAll("line").data(this.$store.state.links).enter().append("line").attr("id",function(t,e){return"link0"+t.id}).attr("stroke","#ff6347").attr("class","link-res").attr("flow",function(t){return t.flow}).attr("stroke-width",function(t){return parseInt(t.flow)}).attr("selecting-mode","false").attr("selected","false").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).on("mouseover",function(t,e){d.transition().duration(500).style("opacity",1),d.html("<span>link-id: "+t.id+"</span><br/><span>flow: "+t.flow+"</span><br/><span>travel free time: "+t.t0+"</span><br/><span>capacity: "+t.c+"</span>").style("left",c.a.pageX+"px").style("top",c.a.pageY-28+"px")}).on("mouseleave",function(t,e){d.transition().duration(500).style("opacity",0)}),v=f.selectAll("circle").data(this.$store.state.nodes).enter().append("circle").attr("r",20).attr("id",function(t,e){return"node0"+e}).attr("class","node-res").attr("fill","#69b3a2").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).on("mouseover",function(t,e){d.transition().duration(500).style("opacity",1),d.html("<span>node-id: "+t.id+"</span><br/><span>name: "+t.name+"</span>").style("left",c.a.pageX+"px").style("top",c.a.pageY-28+"px")}).on("mouseleave",function(t,e){d.transition().duration(500).style("opacity",0)}),m=f.selectAll("text").data(this.$store.state.nodes).enter().append("text").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor","middle").style("fill","dimgray").attr("dominant-baseline","middle").text(function(t){return t.name});c.e(this.$store.state.nodes).force("link",c.c().id(function(t){return t.id}).links(this.$store.state.links)).force("charge",c.d().strength(-300)).force("center",c.b(l/2,u/2)).on("end",function(){p.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),v.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),m.attr("x",function(t){return t.x}).attr("y",function(t){return t.y})})}},computed:{getNodes:function(){return this.$store.state.nodes},getLinks:function(){return this.$store.state.links},items:function(){return this.$store.state.items}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"form"}},[n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",{attrs:{xs12:"",md4:""}},[n("div",[n("v-btn",{attrs:{large:""},on:{click:t.changeSelectingMode}},[t._v("Selecting mode: "+t._s(t.isActive))])],1)]),t._v(" "),n("v-flex",{attrs:{xs12:"",md4:""}},[n("div",[n("v-btn",{attrs:{large:"",disabled:!t.isActive},on:{click:t.resetSelectingMode}},[t._v("Clear")])],1)]),t._v(" "),n("v-flex",{attrs:{xs12:"",md4:""}},[n("div",[n("v-btn",{attrs:{large:"",disabled:!t.isActive},on:{click:t.submitRoute}},[t._v("Submit")])],1)])],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(t){n("M3tW")},"data-v-7b8554cb",null).exports,p=n("BO1k"),v=n.n(p),m={name:"Result",data:function(){return{headers_for_links:[{text:"Link id",align:"left",value:"id"},{text:"Travel free time",value:"t0"},{text:"Capacity",value:"c"},{text:"Flow",value:"flow"},{text:"Travel time",value:"name"}],headers:[{text:"Route id",align:"left",value:"id"},{text:"Route",value:"route"},{text:"Travel flow",value:"name"},{text:"Travel time",value:"name",sortable:!0},{text:"Actions",value:"name",sortable:!1}]}},methods:{traveltime:function(t){return this.$store.getters.traveltime(t)},totalTraveltime:function(t){var e=0,n=!0,r=!1,a=void 0;try{for(var i,o=v()(t);!(n=(i=o.next()).done);n=!0){var s=i.value;e+=parseFloat(this.$store.getters.traveltime(s))}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e},getRoute:function(t){var e=this,n=[];return t.forEach(function(t){var r=e.$store.getters.getNodesFromLinkId(t);n.push(r.source.name+"-"+r.target.name)}),n},totalFlow:function(t){var e=0,n=!0,r=!1,a=void 0;try{for(var i,o=v()(t);!(n=(i=o.next()).done);n=!0){var s=i.value;e+=parseInt(this.$store.getters.getLinkById(s).flow)}}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e}},computed:{nodes:function(){return this.$store.state.nodes},links:function(){return this.$store.state.links},items:function(){return this.$store.state.items}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"result"}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.id))]),t._v(" "),n("td",[t._v(t._s(t.getRoute(e.item.route)))]),t._v(" "),n("td",[t._v(t._s(t.totalFlow(e.item.route)))]),t._v(" "),n("td",[t._v(t._s(t.totalTraveltime(e.item.route)))]),t._v(" "),n("td",{staticClass:"justify-center layout px-0"},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("\n          edit\n        ")])],1)]}}])}),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers_for_links,items:t.links},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.id))]),t._v(" "),n("td",[t._v(t._s(e.item.t0))]),t._v(" "),n("td",[t._v(t._s(e.item.c))]),t._v(" "),n("td",[t._v(t._s(e.item.flow))]),t._v(" "),n("td",[t._v(t._s(t.traveltime(e.item.id)))])]}}])})],1)},staticRenderFns:[]},y={components:{DataViz:l,Form:f,Result:n("VU/8")(m,g,!1,null,null,null).exports}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"map"}},[e("DataViz"),this._v(" "),e("Form"),this._v(" "),e("Result")],1)},staticRenderFns:[]};var h=n("VU/8")(y,x,!1,function(t){n("vdRl")},null,null).exports,k=n("/ocq");r.default.use(k.a);var w=new k.a({routes:[{path:"/",name:"Map",component:h}]}),_=n("3EgV"),b=n.n(_),A=(n("7zck"),n("NYxO")),$=n("M4fF"),z=n.n($);r.default.use(A.a);var F={getLinkById:function(t){return function(e){return t.links.find(function(t){return t.id===e})}},getNodeById:function(t){return function(e){return t.nodes.find(function(t){return t.id===e})}},getItems:function(t){return t.items},getItemsSize:function(t){return t.items.length},traveltime:function(t){return function(e){var n=t.links.find(function(t){return t.id===e}),r=n.flow,a=n.t0,i=n.c;return a*(1+.15*Math.pow(r/i,4))}},getNodesFromLinkId:function(t){return function(e){var n=t.links.find(function(t){return t.id===e});return{source:I.getters.getNodeById(n.source.id),target:I.getters.getNodeById(n.target.id)}}},getNeighborLinks:function(t){return function(e){var n=t.links.find(function(t){return t.id===e}),r=t.links.filter(function(t){return t.source===n.source}),a=t.links.filter(function(t){return t.source===n.target}),i=t.links.filter(function(t){return t.target===n.source}),o=t.links.filter(function(t){return t.target===n.target});return z.a.union(r,a,i,o)}},getNeighborNodes:function(t){return function(t){return t}}},I=new A.a.Store({state:{nodes:[{id:1,name:"A"},{id:2,name:"B"},{id:3,name:"C"},{id:4,name:"D"},{id:5,name:"E"},{id:6,name:"F"},{id:7,name:"G"},{id:8,name:"H"},{id:9,name:"I"},{id:10,name:"J"},{id:11,name:"K"},{id:12,name:"L"},{id:13,name:"M"},{id:14,name:"N"},{id:15,name:"O"},{id:16,name:"P"}],links:[{id:0,flow:0,t0:1,c:4,source:1,target:2},{id:1,flow:0,t0:1,c:4,source:2,target:3},{id:2,flow:0,t0:1,c:4,source:3,target:4},{id:3,flow:0,t0:1,c:4,source:5,target:6},{id:4,flow:0,t0:1,c:4,source:6,target:7},{id:5,flow:0,t0:1,c:4,source:7,target:8},{id:6,t0:1,flow:0,c:4,source:9,target:10},{id:7,flow:0,t0:1,c:4,source:10,target:11},{id:8,flow:0,t0:1,c:4,source:11,target:12},{id:9,flow:0,t0:1,c:4,source:13,target:14},{id:10,flow:0,t0:1,c:4,source:14,target:15},{id:11,t0:1,flow:0,c:4,source:15,target:16},{id:12,flow:0,t0:1,c:4,source:1,target:5},{id:13,flow:0,t0:1,c:4,source:5,target:9},{id:14,flow:0,t0:1,c:4,source:9,target:13},{id:15,flow:0,t0:1,c:4,source:2,target:6},{id:16,flow:0,t0:1,c:4,source:6,target:10},{id:17,flow:0,t0:1,c:4,source:10,target:14},{id:18,t0:1,flow:0,c:4,source:3,target:7},{id:19,t0:1,flow:0,c:4,source:7,target:11},{id:20,t0:1,flow:0,c:4,source:11,target:15},{id:21,t0:1,flow:0,c:4,source:4,target:8},{id:22,t0:1,flow:0,c:4,source:8,target:12},{id:23,t0:1,flow:0,c:4,source:12,target:16}],items:[]},getters:F,mutations:{increment:function(t,e){t.links.find(function(t){return t.id===e}).flow++},pushItem:function(t,e){t.items.push(e)}}}),R=I;r.default.use(b.a),r.default.config.productionTip=!1,new r.default({el:"#app",store:R,router:w,components:{App:o},template:"<App/>"}),new r.default({el:"#map",store:R,router:w,components:{Map:h},template:"<Map/>"}),new r.default({el:"#data-viz",store:R,router:w,data:{},components:{DataViz:l},template:"<DataViz/>",mounted:function(){var t=10,e=30,n=30,r=40,a=500-r-e,i=500-t-n,o=c.f("body").append("div").attr("class","tooltip").style("opacity",0),s=c.f("#data-viz").append("svg").attr("width",a+r+e).attr("height",i+t+n).append("g").attr("transform","translate("+r+","+t+")"),l=s.selectAll("line").data(R.state.links).enter().append("line").attr("id",function(t,e){return"link"+t.id}).attr("stroke","#aaa").attr("stroke-width",10).attr("class","link").attr("flow",0).attr("selecting-mode","false").attr("selected","false").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).on("mouseover",function(t,e){s.select("#link"+t.id).attr("stroke","#1e90ff"),o.transition().duration(500).style("opacity",1),o.html("<span>link-id: "+t.id+"</span><br/><span>flow: "+t.flow+"</span><br/><span>travel free time: "+t.t0+"</span><br/><span>capacity: "+t.c+"</span>").style("left",c.a.pageX+"px").style("top",c.a.pageY-28+"px")}).on("mouseleave",function(t,e){var n=s.select("#link"+t.id);"false"===n.attr("selected")&&n.attr("stroke","#aaa"),o.transition().duration(500).style("opacity",0)}).on("click",function(t,e){var n=s.select("#link"+t.id);"true"===n.attr("selecting-mode")&&("false"===n.attr("selected")?(n.attr("selected",!0),n.attr("stroke","#1e90ff")):(n.attr("selected",!1),n.attr("stroke","#aaa")))}),u=s.selectAll("circle").data(R.state.nodes).enter().append("circle").attr("r",20).attr("id",function(t,e){return"node"+e}).attr("class","node").attr("fill","#69b3a2").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).on("mouseover",function(t,e){s.select("#node"+e).attr("fill","#bbb"),o.transition().duration(500).style("opacity",1),o.html("<span>node-id: "+t.id+"</span><br/><span>name: "+t.name+"</span>").style("left",c.a.pageX+"px").style("top",c.a.pageY-28+"px")}).on("mouseleave",function(t,e){s.select("#node"+e).attr("fill","#69b3a2"),o.transition().duration(500).style("opacity",0)}),d=s.selectAll("text").data(R.state.nodes).enter().append("text").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor","middle").style("fill","dimgray").attr("dominant-baseline","middle").text(function(t){return t.name});c.e(R.state.nodes).force("link",c.c().id(function(t){return t.id}).links(R.state.links)).force("charge",c.d().strength(-300)).force("center",c.b(a/2,i/2)).on("end",function(){l.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),u.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),d.attr("x",function(t){return t.x}).attr("y",function(t){return t.y})});var f=c.f("#data-viz").append("svg").attr("id","data-viz-res").attr("width",a+r+e).attr("height",i+t+n).append("g").attr("transform","translate("+r+","+t+")"),p=f.selectAll("line").data(R.state.links).enter().append("line").attr("id",function(t,e){return"link0"+t.id}).attr("stroke","#ccc").attr("stroke-width",10).attr("class","link-res").attr("flow",function(t){return t.flow}).attr("selecting-mode","false").attr("selected","false").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).on("mouseover",function(t,e){o.transition().duration(500).style("opacity",1),o.html("<span>link-id: "+t.id+"</span><br/><span>flow: "+t.flow+"</span><br/><span>travel free time: "+t.t0+"</span><br/><span>capacity: "+t.c+"</span>").style("left",c.a.pageX+"px").style("top",c.a.pageY-28+"px")}).on("mouseleave",function(t,e){o.transition().duration(500).style("opacity",0)}),v=f.selectAll("circle").data(R.state.nodes).enter().append("circle").attr("r",20).attr("id",function(t,e){return"node0"+e}).attr("class","node-res").attr("fill","#69b3a2").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).on("mouseover",function(t,e){o.transition().duration(500).style("opacity",1),o.html("<span>node-id: "+t.id+"</span><br/><span>name: "+t.name+"</span>").style("left",c.a.pageX+"px").style("top",c.a.pageY-28+"px")}).on("mouseleave",function(t,e){o.transition().duration(500).style("opacity",0)}),m=f.selectAll("text").data(R.state.nodes).enter().append("text").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor","middle").style("fill","dimgray").attr("dominant-baseline","middle").text(function(t){return t.name});c.e(R.state.nodes).force("link",c.c().id(function(t){return t.id}).links(R.state.links)).force("charge",c.d().strength(-300)).force("center",c.b(a/2,i/2)).on("end",function(){p.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),v.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),m.attr("x",function(t){return t.x}).attr("y",function(t){return t.y})})}})},SMe9:function(t,e){},vdRl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.dd31d5089518c78f6a37.js.map